Based on http://www.nongnu.org/espresso/js-cpp.html
